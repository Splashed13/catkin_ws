<?xml version='1.0'?>
<launch>
    <!-- run uav_name="uavteam5" for arena -->
    <arg name="uav_name" default="emulated_uav"/> 

    <node name="guidance" pkg="spar_node" type="demo_wp_roi" respawn="false" output="screen">
        <!-- Linear and yaw motion velocities -->
        <param name="vel_linear" type="double" value="0.5" />
        <param name="vel_yaw" type="double" value="0.2" />

        <!-- Position and yaw waypoint accuracies -->
        <param name="acc_pos" type="double" value="0.2" />
        <param name="acc_yaw" type="double" value="2" />

        <!-- survey altitude -->
        <param name="survey_altitude" type="double" value="2.0" />

        <!-- Spar parameters -->
        <param name="action_topic" type="string" value="spar/flight" />

        <!-- Remappings -->
        <remap from="~pose" to="uavasr/pose" if="$(eval arg('uav_name') == 'emulated_uav')" />
        <remap from="~pose" to="mavros/local_position/pose" unless="$(eval arg('uav_name') == 'emulated_uav')" />
        <remap from="~/roi" to="target_detection/roi" />
    </node>

    <!-- Static frame broadcaster -->
    <node name="tf2_broadcaster_frames" pkg="spar_node" type="tf2_broadcaster_frames" output="screen">
        <param name="uav_name" value="$(arg uav_name)" />
    </node>

    <!-- TF2 listener -->
    <node name="tf2_listener" pkg="spar_node" type="tf2_listener" output="screen"/>
    
    <!-- Actuator controller -->
    <node name="actuator_controller" pkg="spar_node" type="payload" output="screen"/>
</launch>
